<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å¥åº·å°±åŒ»å¯¼èˆª</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <span class="title">å¥åº·å°±åŒ»å¯¼èˆª</span>
            <span class="subtitle">ä¸ºå¯¹åŒ»é™¢å°±è¯Šæµç¨‹ä¸ç†Ÿæ‚‰çš„æ‚£è€…æä¾›æŒ‡å¼•</span>
        </div>

        <div class="card">
            <span class="section-title">ğŸ“‹ é¢„çº¦æŒ‚å·æµç¨‹æŒ‡å¼•</span>
            <span class="subtitle-text">è¯·é€‰æ‹©æ‚¨è¦å°±è¯Šçš„åŒ»é™¢ï¼Œç‚¹å‡»æŸ¥çœ‹æŒ‚å·é“¾æ¥</span>
            
            <div class="hospital-booking-grid" id="hospitalGrid">
                <!-- Dynamically populated -->
            </div>

            <div class="booking-link-container" id="bookingLinkContainer" style="display: none;">
                <div class="link-tip">
                    <span class="assistant-icon">ğŸ’</span>
                    <span>è¯·ç‚¹å‡»é“¾æ¥è¿›å…¥åŒ»é™¢å…¬ä¼—å·é¢„çº¦å·æº</span>
                </div>
                <button class="btn-booking-link" onclick="openBookingLink()">ç‚¹å‡»è¿›å…¥é¢„çº¦æŒ‚å·</button>
            </div>
        </div>

        <div class="card">
            <span class="section-title">ğŸ« å°±è¯Šå–å·æŒ‡å¼•</span>
            <span class="subtitle-text">è¯·é€‰æ‹©æ‚¨çš„å°±è¯Šå–å·æ–¹å¼</span>
            
            <div class="button-group">
                <button class="btn-primary" onclick="selectPaymentMethod('èº«ä»½è¯')">
                    <span class="icon">ğŸªª</span>
                    <span>èº«ä»½è¯</span>
                </button>
                <button class="btn-primary" onclick="selectPaymentMethod('ç¤¾ä¿å¡')">
                    <span class="icon">ğŸ’³</span>
                    <span>ç¤¾ä¿å¡</span>
                </button>
                <button class="btn-primary" onclick="selectPaymentMethod('ç”µå­åŒ»ä¿')">
                    <span class="icon">ğŸ“±</span>
                    <span>ç”µå­åŒ»ä¿</span>
                </button>
            </div>

            <div class="guide-section" id="idCardGuide">
                <div class="carousel-container">
                    <div class="carousel-track" id="idCardTrack">
                        <!-- Dynamically populated -->
                    </div>
                </div>
                <div class="swiper-controls">
                    <button class="btn-control" id="prevBtnId" onclick="featureCarousel.prev()">ä¸Šä¸€é¡µ</button>
                    <button class="btn-control" id="nextBtnId" onclick="featureCarousel.next()">ä¸‹ä¸€é¡µ</button>
                </div>
            </div>

            <div class="guide-section" id="socialCardGuide">
                <div class="carousel-container">
                    <div class="carousel-track" id="socialCardTrack">
                        <!-- Dynamically populated -->
                    </div>
                </div>
                <div class="swiper-controls">
                    <button class="btn-control" id="prevBtnSocial" onclick="socialCarousel.prev()">ä¸Šä¸€é¡µ</button>
                    <button class="btn-control" id="nextBtnSocial" onclick="socialCarousel.next()">ä¸‹ä¸€é¡µ</button>
                </div>
            </div>

            <div class="guide-section" id="electronicGuide">
                 <div class="card" style="background: #f0f9ff; border: 1px solid #e0f2fe; box-shadow: none;">
                    <div class="link-tip">
                        <span class="assistant-icon">ğŸ’¡</span>
                        <span style="font-weight: 600; color: #5d7d8f;">ç”µå­åŒ»ä¿ä½¿ç”¨æç¤º</span>
                    </div>
                    <p style="font-size: 14px; color: #666; line-height: 1.6; margin: 10px 0;">
                        1. è¯·æå‰åœ¨å¾®ä¿¡æˆ–æ”¯ä»˜å®æ¿€æ´»"åŒ»ä¿ç”µå­å‡­è¯"ã€‚<br>
                        2. åœ¨è‡ªåŠ©æœºå–å·æˆ–ç¼´è´¹æ—¶ï¼Œé€‰æ‹©"æ‰«ç "æˆ–"ç”µå­åŒ»ä¿"ã€‚<br>
                        3. å‡ºç¤ºæ‰‹æœºä¸Šçš„åŒ»ä¿äºŒç»´ç ï¼Œå¯¹å‡†è‡ªåŠ©æœºæ‰«ç å£å³å¯ã€‚
                    </p>
                </div>
            </div>
        </div>
        
        <!-- Navigation to Hospital Department Selection -->
         <div class="card" style="text-align: center; cursor: pointer;" onclick="window.location.href='hospital.html'">
            <span class="section-title">ğŸ¥ åŒ»é™¢ç§‘å®¤å¯¼èˆª</span>
            <span class="subtitle-text">ç‚¹å‡»è¿›å…¥ç§‘å®¤è¯¦ç»†æŒ‡å¼•</span>
        </div>

    </div>

    <script>
        const hospitals = [
            { name: 'æ·±åœ³å¸‚äººæ°‘åŒ»é™¢' },
            { name: 'æ·±åœ³å¸‚ç¬¬äºŒäººæ°‘åŒ»é™¢' },
            { name: 'æ·±åœ³å¸‚å„¿ç«¥åŒ»é™¢' },
            { name: 'æ·±åœ³å¸‚ç½—æ¹–åŒºäººæ°‘åŒ»é™¢' },
            { name: 'å¹¿å·ä¸­åŒ»è¯å¤§å­¦æ·±åœ³åŒ»é™¢' },
            { name: 'é¦™æ¸¯å¤§å­¦æ·±åœ³åŒ»é™¢' }
        ];

        const hospitalBookingLinks = {
            'æ·±åœ³å¸‚äººæ°‘åŒ»é™¢': 'https://wx.169jk.com/Reservation/MediclRegistattion/NDeptList?hospitalId=1',
            'æ·±åœ³å¸‚ç¬¬äºŒäººæ°‘åŒ»é™¢': 'https://wxis.91160.com/wxis/dep/main_dep.do?r=1768053765437&unit_id=22&classId=22&sonType=1&tagName=1',
            'æ·±åœ³å¸‚å„¿ç«¥åŒ»é™¢': 'https://wxis.91160.com/wxis/dep/main.do?unit_id=111',
            'æ·±åœ³å¸‚ç½—æ¹–åŒºäººæ°‘åŒ»é™¢': 'https://nat.szlhyy.com.cn/nginx/lhyywebhospital/register/dept-select-new?orgID=1',
            'å¹¿å·ä¸­åŒ»è¯å¤§å­¦æ·±åœ³åŒ»é™¢': 'https://ihosp2.clear-sz.com/pages/register/selectDepartment/index2',
            'é¦™æ¸¯å¤§å­¦æ·±åœ³åŒ»é™¢': 'https://wx.hku-szh.org/wehospital/opregister/choosedept'
        };

        let currentBookingLink = '';
        let currentHospitalName = '';

        // Render Hospitals
        const hospitalGrid = document.getElementById('hospitalGrid');
        hospitals.forEach((h, index) => {
            const btn = document.createElement('button');
            btn.className = `btn-hospital-booking hospital-booking-${index + 1}`;
            btn.innerHTML = `<span class="hospital-name">${h.name}</span>`;
            btn.onclick = () => showHospitalBookingLink(h.name, btn);
            hospitalGrid.appendChild(btn);
        });

        function showHospitalBookingLink(name, btnElement) {
            currentHospitalName = name;
            currentBookingLink = hospitalBookingLinks[name];
            
            // Highlight selection
            document.querySelectorAll('.btn-hospital-booking').forEach(b => b.classList.remove('selected'));
            btnElement.classList.add('selected');

            document.getElementById('bookingLinkContainer').style.display = 'block';
        }

        function openBookingLink() {
            if (currentBookingLink) {
                // In a static site, we can just open in new tab
                window.open(currentBookingLink, '_blank');
                // Or redirect if we want: window.location.href = currentBookingLink;
            }
        }

        // --- Carousel Logic ---
        
        const idCardSteps = [
            { text: 'è¯·ç‚¹å‡»è‡ªåŠ©æœº"å–å·"', image: 'https://jsd.cdn.zzko.cn/gh/LZHMS/picx-images-hosting@master/Profile/DailyImage/image.2h8soa65r9.webp' },
            { text: 'é€‰æ‹©èº«ä»½è¯å–å·', image: 'https://jsd.cdn.zzko.cn/gh/LZHMS/picx-images-hosting@master/Profile/DailyImage/image.77e1mp2eb4.webp' },
            { text: 'å°†èº«ä»½è¯æ’å…¥è‡ªåŠ©æœºä¸‹æ–¹å¡æ§½', image: 'https://jsd.cdn.zzko.cn/gh/LZHMS/picx-images-hosting@master/Profile/DailyImage/image.2yyucvexb0.webp' },
            { text: 'ç­‰å¾…è‡ªåŠ©æœºè¯»å¡ï¼Œé€‰æ‹©æ”¯ä»˜æ–¹å¼', image: 'https://jsd.cdn.zzko.cn/gh/LZHMS/picx-images-hosting@master/Profile/DailyImage/image.6m4e0ebhc6.webp' },
            { text: 'æ ¹æ®æç¤ºå®Œæˆæ”¯ä»˜ï¼Œå‡ºå·', image: 'https://jsd.cdn.zzko.cn/gh/LZHMS/picx-images-hosting@master/Profile/DailyImage/image.232cxf6n1o.webp' }
        ];
        
        const socialCardSteps = [
            { text: 'è¯·ç‚¹å‡»è‡ªåŠ©æœº"å–å·"', image: 'https://jsd.cdn.zzko.cn/gh/LZHMS/picx-images-hosting@master/Profile/DailyImage/image.2h8soa65r9.webp' },
            { text: 'é€‰æ‹©ç¤¾ä¿å¡å–å·', image: 'https://jsd.cdn.zzko.cn/gh/LZHMS/picx-images-hosting@master/Profile/DailyImage/image.5moan9j6th.webp' },
            { text: 'å°†ç¤¾ä¿å¡æ’å…¥è‡ªåŠ©æœºï¼Œæ ¹æ®æç¤ºå®Œæˆæ”¯ä»˜ï¼Œå‡ºå·', image: 'https://jsd.cdn.zzko.cn/gh/LZHMS/picx-images-hosting@master/Profile/DailyImage/image.5moan9qz1p.webp' }
        ];

        class Carousel {
            constructor(trackId, steps, prevBtnId, nextBtnId) {
                this.track = document.getElementById(trackId);
                this.steps = steps;
                this.currentIndex = 0;
                this.prevBtn = document.getElementById(prevBtnId);
                this.nextBtn = document.getElementById(nextBtnId);
                this.render();
                this.updateButtons();
            }

            render() {
                this.track.innerHTML = '';
                this.steps.forEach(step => {
                    const item = document.createElement('div');
                    item.className = 'carousel-item';
                    item.innerHTML = `
                        <div class="chat-bubble">
                            <span class="assistant-icon">ğŸ‘¤</span>
                            <span>${step.text}</span>
                        </div>
                        <img src="${step.image}" class="guide-image" loading="lazy">
                    `;
                    this.track.appendChild(item);
                });
            }

            updateTrack() {
                const width = this.track.parentElement.offsetWidth; // width of container
                this.track.style.transform = `translateX(-${this.currentIndex * 100}%)`;
            }

            updateButtons() {
                this.prevBtn.disabled = this.currentIndex === 0;
                this.nextBtn.disabled = this.currentIndex === this.steps.length - 1;
                this.updateTrack();
            }

            prev() {
                if (this.currentIndex > 0) {
                    this.currentIndex--;
                    this.updateButtons();
                }
            }

            next() {
                if (this.currentIndex < this.steps.length - 1) {
                    this.currentIndex++;
                    this.updateButtons();
                }
            }
        }

        let featureCarousel, socialCarousel;

        function selectPaymentMethod(method) {
            document.querySelectorAll('.guide-section').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.btn-primary').forEach(el => el.classList.remove('active')); // clear active button style if any

            if (method === 'èº«ä»½è¯') {
                document.getElementById('idCardGuide').classList.add('active');
                if (!featureCarousel) featureCarousel = new Carousel('idCardTrack', idCardSteps, 'prevBtnId', 'nextBtnId');
            } else if (method === 'ç¤¾ä¿å¡') {
                document.getElementById('socialCardGuide').classList.add('active');
                if (!socialCarousel) socialCarousel = new Carousel('socialCardTrack', socialCardSteps, 'prevBtnSocial', 'nextBtnSocial');
            } else if (method === 'ç”µå­åŒ»ä¿') {
               // Show electronic guide
               document.getElementById('electronicGuide').classList.add('active');
            }
        }
        
    </script>
</body>
</html>
